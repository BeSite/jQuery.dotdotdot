<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tests</title>
  <link rel="stylesheet" href="./qunit.css">
  <style>
    .hide {
        visibility: hidden;
    }
  </style>
</head>
<body>
    <div id="qunit"></div>
    <div id="qunit-fixture"></div>
    <script src="./qunit.js"></script>
    <script src="jquery-1.10.2.js"></script>
    <!-- <script src="../src/js/jquery.dotdotdot.js"></script> -->
    <!-- <script src="./jquery.dotdotdot.js"></script> -->
    <script src="./jquery.dotdotdot.old.js"></script>

    <div class="hide" id="dont-truncate-after">
        <style>
            #wrapper {
                width: 200px;
                height: 70px;
                border: 1px solid red;
                display: block;
            }
        </style>
        <div id="wrapper">
            <span id="dealDescriptionText">
                sddsddfasdfsasdfasdfdf asd asdf asdf asdf adsf asdf asdf sdf sdf asdf asdg sd sdf asdasd sdfsdg ASD asdf
            </span>
            <a id="what" href="/test">
                read more
            </a>
        </div>
    </div>
    <script>
        $("#dont-truncate-after #wrapper").dotdotdot({
            after: 'a#what'
        });
        test('Don\'t truncate after', function () {
            equal($('#dont-truncate-after #what').length, 1);
        });
    </script>

    <div class="hide" id="first-child-bug">
        <style>
            #wrapper {
                width: 200px;
                height: 70px;
                border: 1px solid red;
                display: block;
            }
        </style>
        <div id="wrapper">
            <span>asdasd  das d dasdasda sdf sfsdgdsdasf dasf dasdsf dsf s</span>
            <span>foo foo foo foo foo foofoo foo foofoo foo foofoo foo foo</span>
            <a id="what" href="/test">
                read more
            </a>
        </div>
    </div>
    <script>
        $("#first-child-bug #wrapper").dotdotdot({
            after: 'a#what'
        });
        test('First child bug', function () {
            equal($('#first-child-bug span').length, 2);
        });
    </script>

</body>
</html>